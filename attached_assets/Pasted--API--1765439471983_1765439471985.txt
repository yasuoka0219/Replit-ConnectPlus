【絶対に守るルール】

- 既存の機能を壊さないことを最優先とします。
- 既存のテーブル名・カラム名・関数名・APIエンドポイント名・コンポーネント名を「削除」「改名」「型変更」しないでください。
- 既存コードの大幅なリファクタリングは禁止です。必要最小限の変更（フィールドの追加、画面項目の追加、表示順の変更、既存コンポーネントの再配置など）のみにしてください。
- 既存のファイル構成やディレクトリ構造は変えないでください。
- マイグレーションが必要な場合は、「追加」のみ行い、既存カラムの削除・型変更は行わないでください。
- 既存のバリデーションルールやビジネスロジックを変更しないでください。どうしても変更が必要な場合は、既存のロジックを残したまま、新しいロジックを追加する形にしてください。
- もし仕様上あいまいな点があれば、「既存の挙動を変えない」方向で判断し、保守的に実装してください。

このルールに従い、「既存機能を壊さず、追加実装・レイアウト調整のみを行う」前提で、以下を実装してください。

--------------------------------
【前提（現在の状態）】

- すでに以下の画面が存在しています：
  - 「ダッシュボード」画面：企業数、連絡先、案件数、総額、今月の売上、パイプライン総額、成約率、案件ステージ別グラフ、業界別受注率ランキング、最近の案件、最近のタスク などがある
  - 「業界別分析」画面：業界フィルタと「分析種別（平均単価など）」のドロップダウン、グラフ、受注/失注のカードがある
  - 「クロス集計分析」画面：売上合計、新規受注件数、受注率、新規リード数のカード、リードソース別・業界別・担当者別・ステージ別ファネル・期間別推移・失注理由分析などのセクションが存在する
- これらの画面やコンポーネントを完全に作り直すのではなく、「役割を整理してレイアウトを再構成する」ことが目的です。

--------------------------------
【目的】

1. メインダッシュボードを「営業のスナップショット確認用」に特化させ、KPIと主要グラフをわかりやすく整理する。
2. クロス集計分析ページを「詳細分析用」に位置づけ、メインからリンクして深掘りできるようにする。
3. 業界別分析ページは、業界の深掘り専用ページとして再構成する。
4. 既存のクエリや集計ロジックは可能な限り流用し、同じ数字を別の場所で二重に実装しない（重複ロジックを避ける）。

--------------------------------
【実装タスク：メインダッシュボードの再構成】

1. KPIカードの整理
   - ダッシュボード上部のKPIカードを以下の4つに変更・整理してください：
     - 今月の売上
     - パイプライン総額
     - 成約率
     - 新規リード数
   - 既存の「企業数」「連絡先」「案件数」「総額」の4つは、1段下に「サマリー」セクションとして小さめカードでまとめて表示してください。
   - 数値の計算ロジックは既存実装を流用し、もし同じ値を別のコンポーネントで計算している場合は、共通のヘルパーやフックにまとめる方向で検討してください（無理に統合しなくてもよいが、二重実装は避ける）。

2. グラフエリアの整理
   - 中段の左側に「ステージ別ファネル」グラフを配置してください。
     - 既存の「案件ステージ別」の棒グラフコンポーネントと、クロス集計ページの「ステージ別ファネル」コンポーネントのどちらか、もしくは両方を確認し、より分かりやすい方を流用してください。
     - 「件数」と「金額」が一目でわかるビジュアルを優先してください。
   - 中段の右側に「期間別推移」グラフを配置してください。
     - クロス集計ページにある「期間別推移（売上・新規顧客数・受注率）」グラフを流用し、表示をコンパクトにしてダッシュボードに配置してください。
   - 既存の「業界別受注率ランキング」グラフは、クロス集計ページの業界別テーブルと役割が重複しているため、一旦ダッシュボードからは削除してください（コンポーネント自体はコードから削除せず、未使用状態にするか、将来の再利用に備えて残しておいて構いません）。

3. 勝ち筋サマリー（リードソース / 業界）のミニテーブル
   - ダッシュボード下段に新しい「勝ち筋サマリー」セクションを作成し、左右2カラムで配置してください。
   - 左カラム：「リードソース別 受注率・単価（トップ3）」ミニテーブル
     - クロス集計ページの「リードソース別 受注率・単価」テーブルのデータ取得ロジックを再利用し、受注率や平均単価が高い順に上位3件のみを表示してください。
     - 「すべて見る」リンクを配置し、クリックするとクロス集計ページの該当セクションまたはページ先頭に遷移するようにしてください。
   - 右カラム：「業界別 受注率＆売上（トップ3）」ミニテーブル
     - クロス集計ページの「業界別 受注率＆売上」テーブルのデータ取得ロジックを再利用し、売上 or 受注率の高い順に上位3件のみを表示してください。
     - 同様に「すべて見る」リンクを配置してください。

4. 最近の案件・最近のタスク
   - 既存の「最近の案件」「最近のタスク」セクションはそのまま残してください。
   - レイアウトとしては、ダッシュボード最下部に左右2カラムで並べる構成としてください。

--------------------------------
【実装タスク：クロス集計分析ページの整理】

1. セクション構成
   - 現在存在する以下のセクションを、そのまま活かして順番のみ整理してください：
     1. 上部カード（売上合計 / 新規受注件数 / 受注率 / 新規リード数）
     2. リードソース別 受注率・単価
     3. 業界別 受注率＆売上
     4. 担当者別 活動量と成果
     5. ステージ別ファネル
     6. 期間別推移
     7. 失注理由分析
   - 各セクションに、わかりやすい日本語タイトルと1行サブタイトル（説明文）をつけてください。
     - 例：「リードソース別 受注率・単価」「集客チャネルごとの成果比較で勝ち筋を特定」など。

2. フィルタの共通化
   - 可能であれば、期間・担当者・業界・リードソースなどのフィルタをページ上部に共通配置し、全てのセクションが同じフィルタ条件で集計されるようにしてください。
   - すでにフィルタが存在する場合は、それを共通化し、個別セクションで独自に日付や担当者を指定している実装があれば、共通フィルタに寄せる方向で調整してください（既存のAPIやクエリを大きく書き換えない範囲で）。

3. 失注理由分析テーブル
   - 既に実装されている「失注理由×業界」モード切り替えを確認し、「失注理由×担当者」モードがなければ追加してください。
   - デザインは既存のテーブルスタイルを統一して使用してください。

--------------------------------
【実装タスク：業界別分析ページの役割調整】

1. ページタイトルと役割
   - ページタイトルは「業界別分析」とし、「特定の業界を深掘りするためのページ」であることがサブタイトルで分かるようにしてください。

2. フィルタ
   - 上部に以下のフィルタコンポーネントを配置してください：
     - 業界（industry）：単一選択
     - 期間（date range またはプリセット：今月 / 前月 / 直近3ヶ月など）
     - 分析軸（analysisType）：受注率 / 売上合計 / 平均単価 / 平均リードタイム など
   - 既存の「分析種別」ドロップダウンを拡張して再利用してください。

3. グラフとテーブル
   - 中央のグラフは、選択した業界と分析軸に応じて値を切り替えるようにしてください。
     - 例：分析軸=受注率なら、月別の受注率推移グラフ
           分析軸=売上合計なら、月別売上グラフ など
   - 下部に、選択業界に絞った案件サマリーテーブル（件数、受注率、売上合計、平均単価、平均リードタイムなど）を表示してください。
     - ここでもクロス集計ページの「業界別 受注率＆売上」ロジックを再利用してください。

--------------------------------
【UI/UX 共通の注意点】

- 既存のカラースキームやコンポーネントスタイルを踏襲し、新規に変なデザインを追加しないでください。
- セクションごとに余白・見出しの階層をそろえ、1ページ内で情報が詰まりすぎないようにしてください。
- 分母が0の指標（受注率など）はエラーにせず、「0%」または「-」表示にしてください。
- すべての変更後にビルド・実行が通ることを確認し、コンソールエラーが出ていないことを前提としてください。

以上を踏まえて、既存コードを読み取りながら、メインダッシュボード・クロス集計分析・業界別分析ページのレイアウトとロジックを整理し、営業意思決定がしやすい構成に改善してください。