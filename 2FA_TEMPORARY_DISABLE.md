# 2段階認証機能の一時的な無効化について

## 概要

2段階認証機能は、コードをそのまま保持したまま、設定画面から一時的に非表示にしています。

## 現在の状態

- ✅ **コード**: すべて保持されています
- ✅ **既存の2段階認証**: 既に有効になっているユーザーは引き続き使用できます
- ✅ **ログイン時の2FA**: 既に有効になっているユーザーのログイン時の2段階認証は正常に動作します
- ❌ **新規設定**: 設定画面から2段階認証の設定画面へのリンクが非表示になっています

## 設定画面での表示/非表示

設定画面（`/settings`）での2段階認証セクションの表示は、環境変数`ENABLE_2FA_SETUP`で制御されます。

### 非表示（現在の状態）

環境変数を設定しない、または`false`に設定：
```
ENABLE_2FA_SETUP=false
```
または環境変数を設定しない（デフォルトで非表示）

### 表示（後で有効化する場合）

Railwayの環境変数で以下を設定：
```
ENABLE_2FA_SETUP=true
```

## 有効化方法（後で必要な場合）

1. Railwayダッシュボードで「Variables」タブを開く
2. 環境変数を追加または変更：
   ```
   ENABLE_2FA_SETUP=true
   ```
3. デプロイを再起動（または自動デプロイを待つ）
4. 設定画面に「2段階認証」セクションが表示されます

## 既存の機能への影響

### 影響なし

- 既に2段階認証を有効にしているユーザーのログイン
- 既存の2段階認証設定（無効化など）
- すべての2段階認証関連のコード

### 影響あり

- 新規ユーザーが設定画面から2段階認証を有効化できない（直接URL `/settings/2fa` にアクセスすれば設定可能）

## 注意事項

- 2段階認証の設定画面（`/settings/2fa`）は直接URLでアクセス可能です
- 完全に無効化したい場合は、直接URLでのアクセスも制限する必要があります
- 現状は設定画面からのリンクを非表示にするのみです

