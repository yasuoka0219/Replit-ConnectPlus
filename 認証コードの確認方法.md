# 認証コードの確認方法

開発環境（SMTP設定なし）で2段階認証を設定した場合、認証コードは**ログファイル**に出力されます。

## 方法1: ターミナルでログファイルを確認（推奨）

### 最新のログを確認

```bash
# 最新の50行を確認（認証コードを探す）
tail -50 /tmp/connectplus.log | grep -i "2fa\|code\|認証"

# または、すべてのログを表示
tail -100 /tmp/connectplus.log
```

### 認証コードの形式

ログには以下のような形式で表示されます：

```
[2FA Email] ⚠️ SMTP設定がありません。開発モードで動作しています。
[2FA Email] 認証コード: 123456
[2FA Email] メールアドレス: your-email@example.com
[2FA Email] .envファイルにSMTP設定を追加してください。
```

**6桁の数字**が認証コードです（例: `123456`）。

## 方法2: ログをリアルタイムで監視

新しいターミナルウィンドウを開いて、以下のコマンドを実行：

```bash
# ログをリアルタイムで監視
tail -f /tmp/connectplus.log
```

このコマンドを実行した状態で、2段階認証を設定すると、リアルタイムで認証コードが表示されます。

**停止する場合**: `Ctrl + C` を押してください。

## 方法3: 設定画面から確認

現在、設定画面に認証コードを表示する機能を追加する予定です。

## 使用手順

1. **2段階認証を設定する**
   - 設定ページ → セキュリティ設定 → 2段階認証 → 「2段階認証を設定する」をクリック

2. **ターミナルでログを確認**
   ```bash
   tail -50 /tmp/connectplus.log | grep "認証コード"
   ```

3. **6桁の認証コードをコピー**
   - `[2FA Email] 認証コード: XXXXXX` の `XXXXXX` の部分をコピー

4. **設定画面に入力**
   - 「認証コード（6桁）」フィールドにコードを入力
   - 「確認して有効にする」ボタンをクリック

## ヒント

- 認証コードは**10分間**有効です
- 新しいコードが送信されると、古いコードは無効になります
- コードが見つからない場合は、ログファイル全体を確認してください



